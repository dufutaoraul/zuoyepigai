-- 🚀 一次性完成所有数据库设置和数据导入
-- 复制此文件全部内容到Supabase SQL Editor并执行

-- 1. 创建学员名单表
CREATE TABLE IF NOT EXISTS students (
  student_id VARCHAR(20) PRIMARY KEY,
  student_name VARCHAR(100) NOT NULL,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- 2. 创建作业清单表
CREATE TABLE IF NOT EXISTS assignments (
  assignment_id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
  day_number INTEGER NOT NULL,
  assignment_title VARCHAR(200) NOT NULL,
  is_mandatory BOOLEAN NOT NULL DEFAULT true,
  description TEXT NOT NULL,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- 3. 创建作业提交审核表
CREATE TABLE IF NOT EXISTS submissions (
  submission_id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
  student_id VARCHAR(20) REFERENCES students(student_id) ON DELETE CASCADE,
  assignment_id UUID REFERENCES assignments(assignment_id) ON DELETE CASCADE,
  submission_date TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  attachments_url JSONB NOT NULL DEFAULT '[]'::jsonb,
  status VARCHAR(20) NOT NULL DEFAULT '批改中' CHECK (status IN ('批改中', '合格', '不合格')),
  feedback TEXT,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- 4. 创建索引
CREATE INDEX IF NOT EXISTS idx_assignments_day_number ON assignments(day_number);
CREATE INDEX IF NOT EXISTS idx_assignments_mandatory ON assignments(is_mandatory);
CREATE INDEX IF NOT EXISTS idx_submissions_student_id ON submissions(student_id);
CREATE INDEX IF NOT EXISTS idx_submissions_assignment_id ON submissions(assignment_id);
CREATE INDEX IF NOT EXISTS idx_submissions_status ON submissions(status);

-- 5. 插入AI创富营作业数据
INSERT INTO assignments (day_number, assignment_title, is_mandatory, description) VALUES
(1, 'AI工具使用基础', true, '学习和掌握基本的AI工具使用方法。要求：1. 了解主流AI工具；2. 完成基础操作练习；3. 提交使用心得。'),
(1, 'AI创作实践', false, '使用AI工具进行创作练习。要求：1. 选择一个AI创作工具；2. 完成一个小作品；3. 分享创作过程。'),
(2, 'AI与商业应用', true, '了解AI在商业领域的应用案例。要求：1. 研究一个AI商业案例；2. 分析应用效果；3. 提出改进建议。'),
(2, 'AI工具比较分析', false, '比较不同AI工具的特点和适用场景。要求：1. 选择2-3个同类AI工具；2. 对比分析优劣；3. 给出使用建议。'),
(3, 'AI创富项目策划', true, '设计一个基于AI的创富项目。要求：1. 明确项目目标；2. 制定实施计划；3. 分析可行性和风险。'),
(4, 'AI创富项目实施', true, '开始实施AI创富项目。要求：1. 按计划执行项目；2. 记录实施过程；3. 及时调整策略。'),
(5, 'AI创富项目总结', true, '完成AI创富项目总结。要求：1. 分析项目成果；2. 总结经验教训；3. 制定后续计划。');

-- 6. 批量插入所有260个学员数据
INSERT INTO students (student_id, student_name) VALUES
('AXCF2025010001', 'Mike'),
('AXCF2025010002', '缘起'),
('AXCF2025010003', '兔子'),
('AXCF2025010004', '小惠'),
('AXCF2025010005', '正方形'),
('AXCF2025010006', '陶子'),
('AXCF2025010007', '淑女'),
('AXCF2025010008', '郑鸿鸿'),
('AXCF2025010009', '莎曦🍒'),
('AXCF2025010010', 'DIBO플라워구독'),
('AXCF2025010011', 'Alice Wang'),
('AXCF2025010012', '明明💋如果快乐是一种病毒💋'),
('AXCF2025010013', '光子'),
('AXCF2025010014', '彭先生'),
('AXCF2025010015', '🌟🌺杨大花💖🌞🌷🌻'),
('AXCF2025010016', '海域升辉'),
('AXCF2025010017', '王家倩'),
('AXCF2025010018', '伊心'),
('AXCF2025010019', '李洺梒1413'),
('AXCF2025010020', 'iff'),
('AXCF2025010021', '源一'),
('AXCF2025010022', 'dunk'),
('AXCF2025010023', '沈勤の神奇宇宙'),
('AXCF2025010024', '张燕'),
('AXCF2025010025', '粥'),
('AXCF2025010026', '🌱方不可'),
('AXCF2025010027', '簡单'),
('AXCF2025010028', 'Christy'),
('AXCF2025010029', '王井言'),
('AXCF2025010030', 'Ran'),
('AXCF2025010031', '杨杨｜锦瑟珠宝🌟心灵成长'),
('AXCF2025010032', '小雪伦'),
('AXCF2025010033', 'Shirley'),
('AXCF2025010034', 'Crystal'),
('AXCF2025010035', '素人'),
('AXCF2025010036', 'Wendy'),
('AXCF2025010037', '溪锟'),
('AXCF2025010038', 'David 🍎'),
('AXCF2025010039', '苏亭羽'),
('AXCF2025010040', '贝贝鲁-深圳-教育管理'),
('AXCF2025010041', 'Tiffany'),
('AXCF2025010042', '超人队长'),
('AXCF2025010043', 'Jessie'),
('AXCF2025010044', '桦桦'),
('AXCF2025010045', '晓璐'),
('AXCF2025010046', '大顺'),
('AXCF2025010047', '石东岭'),
('AXCF2025010048', '英子'),
('AXCF2025010049', 'Sunny 白露'),
('AXCF2025010050', '畅畅Sue'),
('AXCF2025010051', '风之精灵'),
('AXCF2025010052', '美美'),
('AXCF2025010053', '然天'),
('AXCF2025010054', '催梦师九烟'),
('AXCF2025010055', '柠檬秋秋糖'),
('AXCF2025010056', 'Ethan'),
('AXCF2025010057', 'Victoire G'),
('AXCF2025010058', 'Kevin'),
('AXCF2025010059', 'Xunmo'),
('AXCF2025010060', '小花'),
('AXCF2025010061', '12_19🐰ྀི'),
('AXCF2025010062', '天蓝蓝'),
('AXCF2025010063', '夏咏'),
('AXCF2025010064', '九转'),
('AXCF2025010065', 'Jessie'),
('AXCF2025010066', '世音'),
('AXCF2025010067', '何妍ॐ'),
('AXCF2025010068', 'Chen Yu'),
('AXCF2025010069', '佳霖'),
('AXCF2025010070', 'Berlin'),
('AXCF2025010071', 'Clementine'),
('AXCF2025010072', '潞闲'),
('AXCF2025010073', '鹭娜回收行-佳琪'),
('AXCF2025010074', '奢侈品收售·小江'),
('AXCF2025010075', '不只'),
('AXCF2025010076', '李泓含宇'),
('AXCF2025020001', '兜小兜'),
('AXCF2025020002', '鼠鼠'),
('AXCF2025020003', '双'),
('AXCF2025020004', '杨伊伊'),
('AXCF2025020005', '玥'),
('AXCF2025020006', '梁琬翎'),
('AXCF2025020007', '千源'),
('AXCF2025020008', '定春席地而坐'),
('AXCF2025020009', '窦琳'),
('AXCF2025020010', 'PENNY'),
('AXCF2025020011', 'Aslan'),
('AXCF2025020012', '暗香'),
('AXCF2025020013', '安心'),
('AXCF2025020014', '喜乐'),
('AXCF2025020015', 'chili'),
('AXCF2025020016', '愉石'),
('AXCF2025020017', '珮琳'),
('AXCF2025020018', '若惠'),
('AXCF2025020019', '不被定义的枫'),
('AXCF2025020020', 'Joy 向善向上'),
('AXCF2025020021', '阿敏1413'),
('AXCF2025020022', '婧文'),
('AXCF2025020023', '南极访客'),
('AXCF2025020024', '陈凤玲'),
('AXCF2025020025', '千允🍬'),
('AXCF2025020026', 'Echo✨'),
('AXCF2025020027', 'shell'),
('AXCF2025020028', '岁月'),
('AXCF2025020029', 'Candy'),
('AXCF2025020030', '程汇珺'),
('AXCF2025020031', 'Connie Jin'),
('AXCF2025020032', '陈新林'),
('AXCF2025020033', '芳芳'),
('AXCF2025020034', '福田心耕'),
('AXCF2025020035', '顾幼幼'),
('AXCF2025020036', '夏志（Al Freestyle）'),
('AXCF2025020037', '梵诺瑜伽艾灸'),
('AXCF2025020038', '王丽雅'),
('AXCF2025020039', 'Cathy'),
('AXCF2025020040', '文'),
('AXCF2025020041', '慧'),
('AXCF2025020042', '王燕霞'),
('AXCF2025020043', '暴躁的二踢脚🧨'),
('AXCF2025020044', '无双'),
('AXCF2025020045', 'Ananda'),
('AXCF2025020046', 'Windy'),
('AXCF2025020047', 'Bonny'),
('AXCF2025030001', '我在'),
('AXCF2025030002', '夏天'),
('AXCF2025030003', '英发泳衣泳具(一路向南)'),
('AXCF2025030004', '诚鑫诚义'),
('AXCF2025030005', '李芮阳'),
('AXCF2025030006', 'Rita_新西兰留学'),
('AXCF2025030007', 'Caroline🎨'),
('AXCF2025030008', '止语'),
('AXCF2025030009', '💗Mei C'),
('AXCF2025030010', 'Poised:喜悦😊'),
('AXCF2025030011', '张一库🐧'),
('AXCF2025030012', '傻不傻（常伴）'),
('AXCF2025030013', '静'),
('AXCF2025030014', '学设计的黑眼圈'),
('AXCF2025030015', '松松🌾 🦋 🌙'),
('AXCF2025030016', '小北'),
('AXCF2025030017', 'coco'),
('AXCF2025030018', 'Oliver'),
('AXCF2025030019', '苦楚'),
('AXCF2025030020', '小渔'),
('AXCF2025030021', 'LuLu'),
('AXCF2025030022', 'Tara'),
('AXCF2025030023', 'Leo'),
('AXCF2025030024', '纳源'),
('AXCF2025030025', '卉'),
('AXCF2025030026', 'Eve'),
('AXCF2025030027', 's泰瑒'),
('AXCF2025030028', '马小林'),
('AXCF2025030029', '施威吉'),
('AXCF2025030030', '恩琪💞'),
('AXCF2025030031', '白雀珊瑚'),
('AXCF2025030032', '谭京京'),
('AXCF2025030033', 'Sherlock'),
('AXCF2025030034', '空白'),
('AXCF2025030035', '雨涵'),
('AXCF2025030036', '吉利布丁413'),
('AXCF2025040001', '王玲（心理）'),
('AXCF2025040002', '杨峻安妈妈中医痛症护眼+抗衰'),
('AXCF2025040003', '林林🍒快乐加倍'),
('AXCF2025040004', 'qdp'),
('AXCF2025040005', 'CC'),
('AXCF2025040006', '秦伊'),
('AXCF2025040007', '李明阳'),
('AXCF2025040008', '时悦（休止符）'),
('AXCF2025040009', '黄四庄园-黄俜寂'),
('AXCF2025040010', '無心（abby413）'),
('AXCF2025040011', '凡喆（Flora）'),
('AXCF2025040012', '金妹'),
('AXCF2025040013', '知凡'),
('AXCF2025040014', '星际旅行者Gavin꫞'),
('AXCF2025040015', '静®'),
('AXCF2025040016', 'lisa'),
('AXCF2025040017', 'WYM（王小沐）'),
('AXCF2025040018', 'Susu（Serena）'),
('AXCF2025040019', '李浩宸'),
('AXCF2025040020', 'ᰔᩚ'),
('AXCF2025040021', '猫夏'),
('AXCF2025040022', 'yanlin.w'),
('AXCF2025040023', 'Sharon'),
('AXCF2025040024', '瓦房店京东养车'),
('AXCF2025040025', 'Ai'),
('AXCF2025040026', '我叫汪某'),
('AXCF2025040027', '晓晓'),
('AXCF2025040028', '扬扬'),
('AXCF2025040029', 'A Thousand Winds'),
('AXCF2025040030', '风'),
('AXCF2025040031', '福往者福来');

-- 执行完成后会显示: "Success. No rows returned" 表示成功
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Supabaseæ•°æ®åº“è®¾ç½®</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
        }
        .step {
            margin-bottom: 30px;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 20px;
        }
        .step h2 {
            color: #4CAF50;
            margin-top: 0;
        }
        .sql-code {
            background: #f8f8f8;
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 15px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            overflow-x: auto;
            white-space: pre;
        }
        .copy-btn {
            background: #007cba;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            float: right;
            margin-top: 10px;
        }
        .copy-btn:hover {
            background: #005a87;
        }
        .warning {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        .success {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        .btn {
            background: #28a745;
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            text-decoration: none;
            display: inline-block;
        }
        .btn:hover {
            background: #218838;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ—„ï¸ Supabaseæ•°æ®åº“å¿«é€Ÿè®¾ç½®</h1>
        
        <div class="warning">
            <strong>æ³¨æ„:</strong> è¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤åœ¨Supabaseæ§åˆ¶å°ä¸­åˆ›å»ºæ•°æ®åº“è¡¨æ ¼ï¼Œç„¶åè¿”å›é¡¹ç›®ç»§ç»­å¯¼å…¥å­¦å‘˜æ•°æ®ã€‚
        </div>

        <div class="step">
            <h2>æ­¥éª¤1: æ‰“å¼€Supabaseæ§åˆ¶å°</h2>
            <p>1. è®¿é—® <a href="https://supabase.com" target="_blank">https://supabase.com</a></p>
            <p>2. ç™»å½•æ‚¨çš„è´¦æˆ·</p>
            <p>3. é€‰æ‹©é¡¹ç›® <strong>zuoyepigai</strong></p>
            <p>4. ç‚¹å‡»å·¦ä¾§èœå•çš„ <strong>SQL Editor</strong></p>
            <p>5. ç‚¹å‡» <strong>New query</strong></p>
        </div>

        <div class="step">
            <h2>æ­¥éª¤2: æ‰§è¡Œå»ºè¡¨SQLä»£ç </h2>
            <p>å¤åˆ¶ä»¥ä¸‹SQLä»£ç å¹¶åœ¨Supabase SQL Editorä¸­æ‰§è¡Œï¼š</p>
            <button class="copy-btn" onclick="copySQL()">å¤åˆ¶SQLä»£ç </button>
            <div id="sql-code" class="sql-code">-- çˆ±å­¦AIåˆ›å¯Œè¥æ•°æ®åº“è¡¨æ ¼åˆ›å»ºè„šæœ¬

-- 1. åˆ›å»ºå­¦å‘˜åå•è¡¨
CREATE TABLE students (
  student_id VARCHAR(20) PRIMARY KEY,
  student_name VARCHAR(100) NOT NULL,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- 2. åˆ›å»ºä½œä¸šæ¸…å•è¡¨
CREATE TABLE assignments (
  assignment_id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
  day_number INTEGER NOT NULL,
  assignment_title VARCHAR(200) NOT NULL,
  is_mandatory BOOLEAN NOT NULL DEFAULT true,
  description TEXT NOT NULL,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- 3. åˆ›å»ºä½œä¸šæäº¤å®¡æ ¸è¡¨
CREATE TABLE submissions (
  submission_id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
  student_id VARCHAR(20) REFERENCES students(student_id) ON DELETE CASCADE,
  assignment_id UUID REFERENCES assignments(assignment_id) ON DELETE CASCADE,
  submission_date TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  attachments_url JSONB NOT NULL DEFAULT '[]'::jsonb,
  status VARCHAR(20) NOT NULL DEFAULT 'æ‰¹æ”¹ä¸­' CHECK (status IN ('æ‰¹æ”¹ä¸­', 'åˆæ ¼', 'ä¸åˆæ ¼')),
  feedback TEXT,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- 4. åˆ›å»ºç´¢å¼•æé«˜æŸ¥è¯¢æ€§èƒ½
CREATE INDEX idx_assignments_day_number ON assignments(day_number);
CREATE INDEX idx_assignments_mandatory ON assignments(is_mandatory);
CREATE INDEX idx_submissions_student_id ON submissions(student_id);
CREATE INDEX idx_submissions_assignment_id ON submissions(assignment_id);
CREATE INDEX idx_submissions_status ON submissions(status);

-- 5. æ’å…¥AIåˆ›å¯Œè¥ä½œä¸šæ•°æ®
INSERT INTO assignments (day_number, assignment_title, is_mandatory, description) VALUES
(1, 'AIå·¥å…·ä½¿ç”¨åŸºç¡€', true, 'å­¦ä¹ å’ŒæŒæ¡åŸºæœ¬çš„AIå·¥å…·ä½¿ç”¨æ–¹æ³•ã€‚è¦æ±‚ï¼š1. äº†è§£ä¸»æµAIå·¥å…·ï¼›2. å®ŒæˆåŸºç¡€æ“ä½œç»ƒä¹ ï¼›3. æäº¤ä½¿ç”¨å¿ƒå¾—ã€‚'),
(1, 'AIåˆ›ä½œå®è·µ', false, 'ä½¿ç”¨AIå·¥å…·è¿›è¡Œåˆ›ä½œç»ƒä¹ ã€‚è¦æ±‚ï¼š1. é€‰æ‹©ä¸€ä¸ªAIåˆ›ä½œå·¥å…·ï¼›2. å®Œæˆä¸€ä¸ªå°ä½œå“ï¼›3. åˆ†äº«åˆ›ä½œè¿‡ç¨‹ã€‚'),
(2, 'AIä¸å•†ä¸šåº”ç”¨', true, 'äº†è§£AIåœ¨å•†ä¸šé¢†åŸŸçš„åº”ç”¨æ¡ˆä¾‹ã€‚è¦æ±‚ï¼š1. ç ”ç©¶ä¸€ä¸ªAIå•†ä¸šæ¡ˆä¾‹ï¼›2. åˆ†æåº”ç”¨æ•ˆæœï¼›3. æå‡ºæ”¹è¿›å»ºè®®ã€‚'),
(2, 'AIå·¥å…·æ¯”è¾ƒåˆ†æ', false, 'æ¯”è¾ƒä¸åŒAIå·¥å…·çš„ç‰¹ç‚¹å’Œé€‚ç”¨åœºæ™¯ã€‚è¦æ±‚ï¼š1. é€‰æ‹©2-3ä¸ªåŒç±»AIå·¥å…·ï¼›2. å¯¹æ¯”åˆ†æä¼˜åŠ£ï¼›3. ç»™å‡ºä½¿ç”¨å»ºè®®ã€‚'),
(3, 'AIåˆ›å¯Œé¡¹ç›®ç­–åˆ’', true, 'è®¾è®¡ä¸€ä¸ªåŸºäºAIçš„åˆ›å¯Œé¡¹ç›®ã€‚è¦æ±‚ï¼š1. æ˜ç¡®é¡¹ç›®ç›®æ ‡ï¼›2. åˆ¶å®šå®æ–½è®¡åˆ’ï¼›3. åˆ†æå¯è¡Œæ€§å’Œé£é™©ã€‚'),
(4, 'AIåˆ›å¯Œé¡¹ç›®å®æ–½', true, 'å¼€å§‹å®æ–½AIåˆ›å¯Œé¡¹ç›®ã€‚è¦æ±‚ï¼š1. æŒ‰è®¡åˆ’æ‰§è¡Œé¡¹ç›®ï¼›2. è®°å½•å®æ–½è¿‡ç¨‹ï¼›3. åŠæ—¶è°ƒæ•´ç­–ç•¥ã€‚'),
(5, 'AIåˆ›å¯Œé¡¹ç›®æ€»ç»“', true, 'å®ŒæˆAIåˆ›å¯Œé¡¹ç›®æ€»ç»“ã€‚è¦æ±‚ï¼š1. åˆ†æé¡¹ç›®æˆæœï¼›2. æ€»ç»“ç»éªŒæ•™è®­ï¼›3. åˆ¶å®šåç»­è®¡åˆ’ã€‚');

-- æ‰§è¡Œå®Œæˆååº”æ˜¾ç¤º "Success. No rows returned"</div>
        </div>

        <div class="step">
            <h2>æ­¥éª¤3: åˆ›å»ºå­˜å‚¨æ¡¶</h2>
            <p>1. åœ¨Supabaseæ§åˆ¶å°ä¸­ï¼Œç‚¹å‡»å·¦ä¾§èœå•çš„ <strong>Storage</strong></p>
            <p>2. ç‚¹å‡» <strong>Create a new bucket</strong></p>
            <p>3. å¡«å†™æ¡¶åç§°: <code>assignments</code></p>
            <p>4. å‹¾é€‰ <strong>Public bucket</strong></p>
            <p>5. ç‚¹å‡» <strong>Create bucket</strong></p>
        </div>

        <div class="step">
            <h2>æ­¥éª¤4: éªŒè¯è¡¨æ ¼åˆ›å»º</h2>
            <p>åœ¨Supabaseæ§åˆ¶å°ä¸­ï¼Œç‚¹å‡»å·¦ä¾§èœå•çš„ <strong>Table Editor</strong>ï¼Œæ‚¨åº”è¯¥èƒ½çœ‹åˆ°ä¸‰ä¸ªæ–°åˆ›å»ºçš„è¡¨æ ¼:</p>
            <ul>
                <li><strong>students</strong> - å­¦å‘˜åå•è¡¨</li>
                <li><strong>assignments</strong> - ä½œä¸šæ¸…å•è¡¨ï¼ˆåº”åŒ…å«7æ¡ä½œä¸šè®°å½•ï¼‰</li>
                <li><strong>submissions</strong> - ä½œä¸šæäº¤è¡¨ï¼ˆåˆå§‹ä¸ºç©ºï¼‰</li>
            </ul>
        </div>

        <div class="success">
            <h3>âœ… è¡¨æ ¼åˆ›å»ºå®Œæˆå</h3>
            <p>å›åˆ°é¡¹ç›®ç›®å½•ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤å¯¼å…¥260ä¸ªå­¦å‘˜æ•°æ®ï¼š</p>
            <code style="background: #f8f8f8; padding: 5px; border-radius: 3px;">node import-students.js</code>
        </div>

        <div style="text-align: center; margin-top: 30px;">
            <a href="https://supabase.com" target="_blank" class="btn">æ‰“å¼€Supabaseæ§åˆ¶å°</a>
        </div>
    </div>

    <script>
        function copySQL() {
            const sqlCode = document.getElementById('sql-code').textContent;
            navigator.clipboard.writeText(sqlCode).then(function() {
                const btn = document.querySelector('.copy-btn');
                const originalText = btn.textContent;
                btn.textContent = 'å·²å¤åˆ¶!';
                btn.style.background = '#28a745';
                setTimeout(() => {
                    btn.textContent = originalText;
                    btn.style.background = '#007cba';
                }, 2000);
            });
        }
    </script>
</body>
</html>